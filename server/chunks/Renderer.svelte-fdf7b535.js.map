{"version":3,"file":"Renderer.svelte-fdf7b535.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/Renderer.svelte.js"],"sourcesContent":["import { c as create_ssr_component } from \"../../_app/immutable/chunks/index-3e01a4ca.js\";\nconst Renderer_svelte_svelte_type_style_lang = \"\";\nconst css = {\n  code: \"body.svelte-1g6x54r{padding-top:0;margin:0}#main-canvas.svelte-1g6x54r{max-height:600px;width:100%;max-width:none;z-index:-1}\",\n  map: null\n};\nfunction initBuffers(gl) {\n  const posBuffer = gl.createBuffer();\n  resizeCanvasToDisplaySize(gl.canvas);\n  gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n  gl.bindBuffer(gl.ARRAY_BUFFER, posBuffer);\n  const positions = [2, 2, -2, 2, 2, -2, -2, -2];\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\n  const colorBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);\n  const colors = [1, 0, 1, 1, 0.6, 1, 0.5, 0, 0.7, 0.5, 0, 0.7];\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);\n  return { pos: posBuffer, color: colorBuffer };\n}\nfunction resizeCanvasToDisplaySize(canvas) {\n  const displayWidth = canvas.clientWidth;\n  const displayHeight = canvas.clientHeight;\n  const needResize = canvas.width !== displayWidth || canvas.height !== displayHeight;\n  if (needResize) {\n    canvas.width = displayWidth;\n    canvas.height = displayHeight;\n  }\n  return needResize;\n}\nconst Renderer = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  const vertexShader = `\n\t\tprecision mediump float;\n\n\t\tattribute vec3 pos;\n\t\tattribute vec3 color;\n\t\tvarying vec4 v_color;\n\n\t\tuniform mat4 modelViewMatrix;\n\t\tuniform mat4 projectionMatrix;\n\t\tuniform vec2 cursorPos;\n\n\t\t// https://gist.github.com/yiwenl/745bfea7f04c456e0101\n\t\tvec3 hsl(vec3 c) {\n    \tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    \tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    \treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n\t\t}\n\n\t\tvoid main() {\n\t\t  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos.x, pos.y, pos.z, 2.0);\n\t\t  v_color = vec4(hsl(vec3(cursorPos.x *  2.0, 0.7, 1.0)), 1.0);\n\t\t}\n\t\t`;\n  const fragmentShader = `\n\t\tprecision mediump float;\n\n\t  varying vec4 v_color;\n    void main() {\n\t\t\tgl_FragColor = v_color;\n    }\n\t`;\n  let gl;\n  let shaderProgram;\n  let programInfo;\n  function main() {\n    const canvas = document.getElementById(\"main-canvas\");\n    gl = canvas.getContext(\"webgl2\", { antialias: true });\n    if (gl === null) {\n      alert(\"Unable to initialize WebGL\");\n      return;\n    }\n    shaderProgram = loadShaderProgram(vertexShader, fragmentShader);\n    programInfo = {\n      program: shaderProgram,\n      attribLocations: {\n        pos: gl.getAttribLocation(shaderProgram, \"pos\"),\n        color: gl.getAttribLocation(shaderProgram, \"color\")\n      },\n      uniformLocations: {\n        projectionMatrix: gl.getUniformLocation(shaderProgram, \"projectionMatrix\"),\n        modelViewMatrix: gl.getUniformLocation(shaderProgram, \"modelViewMatrix\"),\n        cursorPos: gl.getUniformLocation(shaderProgram, \"cursorPos\")\n      }\n    };\n    console.log(programInfo);\n    initBuffers(gl);\n  }\n  function loadShaderProgram(vertexSource, fragmentSource) {\n    const vertexShader2 = compileShader(gl.VERTEX_SHADER, vertexSource);\n    const fragmentShader2 = compileShader(gl.FRAGMENT_SHADER, fragmentSource);\n    const program = gl.createProgram();\n    gl.attachShader(program, vertexShader2);\n    gl.attachShader(program, fragmentShader2);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      alert(`Unable to initialize shader program: \n${gl.getProgramInfoLog(program)}`);\n      gl.deleteProgram(program);\n      return null;\n    }\n    return program;\n  }\n  function compileShader(shaderType, source) {\n    const shader = gl.createShader(shaderType);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      alert(`An error occurred compiling the shaders: \n${gl.getShaderInfoLog(shader)}`);\n      gl.deleteShader(shader);\n      return null;\n    }\n    return shader;\n  }\n  if ($$props.main === void 0 && $$bindings.main && main !== void 0)\n    $$bindings.main(main);\n  $$result.css.add(css);\n  return `<body class=\"${\"svelte-1g6x54r\"}\"><canvas id=\"${\"main-canvas\"}\" class=\"${\"svelte-1g6x54r\"}\"></canvas>\n</body>`;\n});\nexport {\n  Renderer as default\n};\n"],"names":[],"mappings":"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"}